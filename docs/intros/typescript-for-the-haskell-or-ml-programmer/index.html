<!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>TypeScript for Functional Programmers</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" media="screen" href="../../css/handbook.css" />
    </head>
    <body>
    <article>
    <h1 id="typescript-for-functional-programmers"><a href="#typescript-for-functional-programmers">TypeScript for Functional Programmers</h1></a>
<p>TypeScript began its life as an attempt to bring traditional object-oriented types
to JavaScript so that the programmers at Microsoft could bring
traditional object-oriented programs to the web. As it has developed, TypeScript's type
system has evolved to model code written by native JavaScripters. The
resulting system is powerful, interesting and messy.</p>
<p>This introduction is designed for working Haskell or ML programmers
who want to learn TypeScript. It describes how the type system of
TypeScript differs from Haskell's type system. It also describes
unique features of TypeScript's type system that arise from its
modelling of JavaScript code.</p>
<p>This introduction does not cover object-oriented programming. In
practise, object-oriented programs in TypeScript are similar to those
in other popular languages with OO features.</p>
<h1 id="prerequisites"><a href="#prerequisites">Prerequisites</h1></a>
<p>In this introduction, I assume you know the following:</p>
<ul>
<li>How to program in JavaScript, the good parts.</li>
<li>Type syntax of a C-descended language.</li>
</ul>
<p>If you need to learn the good parts of JavaScript, read
<a href="http://shop.oreilly.com/product/9780596517748.do">JavaScript: The Good Parts</a>.
You may be able to skip the book if you know how to write programs in
a call-by-value lexically scoped language with lots of mutability and
not much else.
<a href="https://people.csail.mit.edu/jaffer/r4rs.pdf">R<sup>4</sup>RS Scheme</a> is a good example.</p>
<p><a href="http://www.stroustrup.com/4th.html">The C++ Programming Language</a> is
a good place to learn about C-style type syntax. Unlike C++,
TypeScript uses postfix types, like so: <code>x: string</code> instead of <code>string
x</code>.</p>
<h1 id="concepts-not-in-haskell"><a href="#concepts-not-in-haskell">Concepts not in Haskell</h1></a>
<h2 id="built-in-types"><a href="#built-in-types">Built-in types</h2></a>
<p>JavaScript defines 7 built-in types:</p>
<p>Type        | Explanation
------------|-----------
<code>Number</code>    | a double-precision IEEE 754 floating point.
<code>String</code>    | an immutable UTF-16 string.
<code>Boolean</code>   | <code>true</code> and <code>false</code>.
<code>Symbol</code>    | a unique value usually used as a key.
<code>Null</code>      | equivalent to the unit type.
<code>Undefined</code> | also equivalent to the unit type.
<code>Object</code>    | similar to records.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures">See the MDN page for more detail</a>.</p>
<p>TypeScript has corresponding primitive types for the built-in types:</p>
<ul>
<li><code>number</code></li>
<li><code>string</code></li>
<li><code>boolean</code></li>
<li><code>symbol</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li><code>object</code></li>
</ul>
<h3 id="other-important-typescript-types"><a href="#other-important-typescript-types">Other important Typescript types</h3></a>
<p>Type        | Explanation
------------|-----------
<code>unknown</code> | the top type.
<code>never</code> | the bottom type.
object literal | eg <code>{ property: Type }</code>
<code>void</code> | a subtype of <code>undefined</code> intended for use as a return type.
<code>T[]</code> | mutable arrays, also written <code>Array&lt;T&gt;</code>
<code>[T,T]</code> | tuples, which are fixed-length but mutable
<code>(t: T) =&gt; U</code> | functions</p>
<p>Notes:</p>
<ol>
<li><p>Function syntax includes parameter names. This is pretty hard to get used to!</p>
<p><pre class="typescript-code">    <span class="keyword">let</span> <span class="identifier">fst</span><span class="punctuation">:</span> <span class="punctuation">(</span><span class="parameterName">a</span><span class="punctuation">:</span> <span class="keyword">any</span><span class="punctuation">,</span> <span class="parameterName">d</span><span class="punctuation">:</span> <span class="keyword">any</span><span class="punctuation">)</span> <span class="punctuation">=></span> <span class="keyword">any</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameterName">a</span><span class="punctuation">,</span><span class="parameterName">d</span><span class="punctuation">)</span> <span class="punctuation">=></span> <span class="identifier">a</span><span class="punctuation">;</span>
    <span class="comment">// or more precisely:</span>
    <span class="keyword">let</span> <span class="identifier">snd</span><span class="punctuation">:</span> <span class="punctuation"><</span><span class="typeParameterName"><span class="typeParameterName">T</span></span><span class="punctuation">,</span> <span class="typeParameterName"><span class="typeParameterName">U</span></span><span class="punctuation">></span><span class="punctuation">(</span><span class="parameterName">a</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">,</span> <span class="parameterName">d</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">U</span></span><span class="punctuation">)</span> <span class="punctuation">=></span> <span class="typeParameterName"><span class="identifier">U</span></span> <span class="operator">=</span> <span class="punctuation">(</span><span class="parameterName">a</span><span class="punctuation">,</span><span class="parameterName">d</span><span class="punctuation">)</span> <span class="punctuation">=></span> <span class="identifier">d</span><span class="punctuation">.</span>
    <span class="error"><span class="error-highlight"></span><span class="stringLiteral">``</span></span><span class="stringLiteral">`

2. Object literal type syntax closely mirrors object literal value syntax:

    `</span><span class="stringLiteral">``</span><span class="error"><span class="error-highlight"></span><span class="identifier">ts</span></span>
    <span class="keyword">let</span> <span class="identifier">o</span><span class="punctuation">:</span> <span class="punctuation">{</span> <span class="identifier">n</span><span class="punctuation">:</span> <span class="keyword">number</span><span class="punctuation">,</span> <span class="identifier">xs</span><span class="punctuation">:</span> <span class="keyword">object</span><span class="punctuation">[</span><span class="punctuation">]</span> <span class="punctuation">}</span> <span class="operator">=</span> <span class="error"><span class="error-highlight"></span><span class="punctuation">{</span> <span class="identifier">n</span><span class="punctuation">:</span> <span class="numericLiteral">1</span><span class="punctuation">,</span> <span class="identifier">xs</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span> <span class="punctuation">}</span>
    <span class="stringLiteral">``</span></span><span class="stringLiteral">`

3. `</span><span class="punctuation">[</span><span class="error"><span class="error-highlight"></span><span class="error"><span class="error-highlight"></span><span class="identifier">T</span></span></span><span class="operator">,</span> <span class="error"><span class="error-highlight"></span><span class="identifier">T</span></span><span class="punctuation">]</span><span class="stringLiteral">` is a subtype of `</span><span class="error"><span class="error-highlight"></span><span class="identifier">T</span></span><span class="error"><span class="error-highlight"></span><span class="punctuation">[</span></span><span class="punctuation">]</span><span class="error"><span class="error-highlight"></span><span class="stringLiteral">`. This is different than Haskell, where tuples are not related to lists.

### Boxed types

JavaScript has boxed equivalents of primitive types that contain the
methods that programmers associate with those types. TypeScript
reflects this with, for example, the difference between the primitive
type `</span></span><span class="error"><span class="error-highlight"></span><span class="error"><span class="error-highlight"></span><span class="identifier">number</span></span></span><span class="stringLiteral">` and the boxed type `</span><span class="error"><span class="error-highlight"></span><span class="identifier">Number</span></span><span class="stringLiteral">`. The boxed types are rarely
needed, since their methods return primitives.
</span><span class="error"><span class="error-highlight"></span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot invoke an expression whose type lacks a call signature. Type '{ n: number; xs: never[]; }' has no compatible call signatures.</div></div><div class="listed-error"><div class="error-line">Block-scoped variable 'T' used before its declaration.</div></div><div class="listed-error"><div class="error-line">Left side of comma operator is unused and has no side effects.</div></div><div class="listed-error"><div class="error-line">Block-scoped variable 'T' used before its declaration.</div></div><div class="listed-error"><div class="error-line">'number' only refers to a type, but is being used as a value here.</div></div><div class="listed-error"><div class="error-line">Identifier expected.</div></div><div class="listed-error"><div class="error-line">',' expected.</div></div><div class="listed-error"><div class="error-line">',' expected.</div></div><div class="listed-error"><div class="error-line">',' expected.</div></div><div class="listed-error"><div class="error-line">',' expected.</div></div><div class="listed-error"><div class="error-line">';' expected.</div></div><div class="listed-error"><div class="error-line">';' expected.</div></div><div class="listed-error"><div class="error-line">Unterminated template literal.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=%20%20%20%20let%20fst%3A%20(a%3A%20any%2C%20d%3A%20any)%20%3D%3E%20any%20%3D%20(a%2Cd)%20%3D%3E%20a%3B%0A%20%20%20%20%2F%2F%20or%20more%20precisely%3A%0A%20%20%20%20let%20snd%3A%20%3CT%2C%20U%3E(a%3A%20T%2C%20d%3A%20U)%20%3D%3E%20U%20%3D%20(a%2Cd)%20%3D%3E%20d.%0A%20%20%20%20%60%60%60%0A%0A2.%20Object%20literal%20type%20syntax%20closely%20mirrors%20object%20literal%20value%20syntax%3A%0A%0A%20%20%20%20%60%60%60ts%0A%20%20%20%20let%20o%3A%20%7B%20n%3A%20number%2C%20xs%3A%20object%5B%5D%20%7D%20%3D%20%7B%20n%3A%201%2C%20xs%3A%20%5B%5D%20%7D%0A%20%20%20%20%60%60%60%0A%0A3.%20%60%5BT%2C%20T%5D%60%20is%20a%20subtype%20of%20%60T%5B%5D%60.%20This%20is%20different%20than%20Haskell%2C%20where%20tuples%20are%20not%20related%20to%20lists.%0A%0A%23%23%23%20Boxed%20types%0A%0AJavaScript%20has%20boxed%20equivalents%20of%20primitive%20types%20that%20contain%20the%0Amethods%20that%20programmers%20associate%20with%20those%20types.%20TypeScript%0Areflects%20this%20with%2C%20for%20example%2C%20the%20difference%20between%20the%20primitive%0Atype%20%60number%60%20and%20the%20boxed%20type%20%60Number%60.%20The%20boxed%20types%20are%20rarely%0Aneeded%2C%20since%20their%20methods%20return%20primitives.%0A">Try</a></pre>ts
1..toExponential()
// equivalent to
Number.prototype.toExponential.call(1)
```</p></li>
</ol>
<p>Note that calling methods on numeric literals requires an additional
<code>.</code> to aid the parser.</p>
<h2 id="gradual-typing"><a href="#gradual-typing">Gradual typing</h2></a>
<p>TypeScript uses the type <code>any</code> whenever it can't tell what the type of
an expression should be. Compared to <code>Dynamic</code>, calling <code>any</code> a type
is an overstatement. It just turns off the type checker
wherever it appears. For example, you can push any value into an
<code>any[]</code> without marking the value in any way:</p>
<p><pre class="typescript-code"><span class="comment">// with "noImplicitAny": false in tsconfig.json, anys: any[]</span>
<span class="keyword">const</span> <span class="identifier">anys</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
<span class="identifier">anys</span><span class="punctuation">.</span><span class="identifier">push</span><span class="punctuation">(</span><span class="numericLiteral">1</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="identifier">anys</span><span class="punctuation">.</span><span class="identifier">push</span><span class="punctuation">(</span><span class="stringLiteral">"oh no"</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="identifier">anys</span><span class="punctuation">.</span><span class="identifier">push</span><span class="punctuation">(</span><span class="punctuation">{</span> <span class="identifier">anything</span><span class="punctuation">:</span> <span class="stringLiteral">"goes"</span> <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span><a class="playground-link" href="https://www.typescriptlang.org/play/#src=%2F%2F%20with%20%22noImplicitAny%22%3A%20false%20in%20tsconfig.json%2C%20anys%3A%20any%5B%5D%0Aconst%20anys%20%3D%20%5B%5D%3B%0Aanys.push(1)%3B%0Aanys.push(%22oh%20no%22)%3B%0Aanys.push(%7B%20anything%3A%20%22goes%22%20%7D)%3B">Try</a></pre></p>
<p>And you can use an expression of type <code>any</code> anywhere:</p>
<p><pre class="typescript-code"><span class="error"><span class="error-highlight"></span><span class="identifier">anys</span></span><span class="punctuation">.</span><span class="identifier">map</span><span class="punctuation">(</span><span class="error"><span class="error-highlight"></span><span class="identifier">anys</span></span><span class="punctuation">[</span><span class="numericLiteral">1</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// oh no, "oh no" is not a function</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot find name 'anys'.</div></div><div class="listed-error"><div class="error-line">Cannot find name 'anys'.</div></div></pre></p>
<p><code>any</code> is contagious, too &mdash; if you initialise a variable with an
expression of type <code>any</code>, the variable has type <code>any</code> too.</p>
<p><pre class="typescript-code"><span class="keyword">let</span> <span class="identifier">sepsis</span> <span class="operator">=</span> <span class="error"><span class="error-highlight"></span><span class="identifier">anys</span></span><span class="punctuation">[</span><span class="numericLiteral">0</span><span class="punctuation">]</span> <span class="operator">+</span> <span class="error"><span class="error-highlight"></span><span class="identifier">anys</span></span><span class="punctuation">[</span><span class="numericLiteral">1</span><span class="punctuation">]</span><span class="punctuation">;</span> <span class="comment">// this could mean anything</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot find name 'anys'.</div></div><div class="listed-error"><div class="error-line">Cannot find name 'anys'.</div></div></pre></p>
<p>To get an error when TypeScript produces an <code>any</code>, use
<code>"noImplicitAny": true</code>, or <code>"strict": true</code> in <code>tsconfig.json</code>.</p>
<h2 id="structural-typing"><a href="#structural-typing">Structural typing</h2></a>
<p>Structural typing is a familiar concept to most functional
programmers, although Haskell and most MLs are not
structurally typed. Its basic form is pretty simple:</p>
<p><pre class="typescript-code"><span class="keyword">let</span> <span class="identifier">o</span><span class="punctuation">:</span> <span class="punctuation">{</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">}</span> <span class="operator">=</span> <span class="punctuation">{</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="stringLiteral">"hi"</span><span class="punctuation">,</span> <span class="error"><span class="error-highlight"></span><span class="identifier">extra</span><span class="punctuation">:</span> <span class="numericLiteral">1</span></span> <span class="punctuation">}</span><span class="punctuation">;</span> <span class="comment">// ok</span>
<span class="keyword">let</span> <span class="identifier">o2</span><span class="punctuation">:</span> <span class="punctuation">{</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">}</span> <span class="operator">=</span> <span class="identifier">o</span><span class="punctuation">;</span> <span class="comment">// ok</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Type '{ x: string; extra: number; }' is not assignable to type '{ x: string; }'.</div><div class="error-line"><div class="indent"></div>Object literal may only specify known properties, and 'extra' does not exist in type '{ x: string; }'.</div></div></pre></p>
<p>Here, the object literal <code>{ x: "hi", extra: 1 }</code> has a matching
literal type <code>{ x: string, extra: number }</code>. That
type is assignable to <code>{ x: string }</code> since
it has all the required properties and those properties have
assignable types. The extra property doesn't prevent assignment, it
just makes it a subtype of <code>{ x: string }</code>.</p>
<p>Named types just give a name to a type; for assignability purposes
there's no difference between the type alias <code>One</code> and the interface
type <code>Two</code> below. They both have a property <code>p: string</code>. (Type alises
behave differently than interfaces with respect to recursive
definitions and type parameters, however.)</p>
<p><pre class="typescript-code"><span class="keyword">type</span> <span class="typeAliasName"><span class="identifier">One</span></span> <span class="punctuation">=</span> <span class="punctuation">{</span> <span class="identifier">p</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">}</span><span class="punctuation">;</span>
<span class="keyword">interface</span> <span class="interfaceName"><span class="interfaceName">Two</span></span> <span class="punctuation">{</span> <span class="identifier">p</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">}</span><span class="punctuation">;</span>
<span class="keyword">class</span> <span class="className"><span class="className">Three</span></span> <span class="punctuation">{</span> <span class="identifier">p</span> <span class="operator">=</span> <span class="stringLiteral">"Hello"</span> <span class="punctuation">}</span><span class="punctuation">;</span>

<span class="keyword">let</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="typeAliasName"><span class="identifier">One</span></span> <span class="operator">=</span> <span class="punctuation">{</span> <span class="identifier">p</span><span class="punctuation">:</span> <span class="stringLiteral">'hi'</span> <span class="punctuation">}</span><span class="punctuation">;</span>
<span class="keyword">let</span> <span class="identifier">two</span><span class="punctuation">:</span> <span class="interfaceName"><span class="identifier">Two</span></span> <span class="operator">=</span> <span class="identifier">x</span><span class="punctuation">;</span>
<span class="identifier">two</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="className"><span class="identifier">Three</span></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span><a class="playground-link" href="https://www.typescriptlang.org/play/#src=type%20One%20%3D%20%7B%20p%3A%20string%20%7D%3B%0Ainterface%20Two%20%7B%20p%3A%20string%20%7D%3B%0Aclass%20Three%20%7B%20p%20%3D%20%22Hello%22%20%7D%3B%0A%0Alet%20x%3A%20One%20%3D%20%7B%20p%3A%20'hi'%20%7D%3B%0Alet%20two%3A%20Two%20%3D%20x%3B%0Atwo%20%3D%20new%20Three()%3B">Try</a></pre></p>
<h2 id="unions"><a href="#unions">Unions</h2></a>
<p>In TypeScript, union types are untagged. In other words, they are not
discriminated unions like <code>data</code> in Haskell. However, you can often
discriminate types in a union using built-in tags or other properties.</p>
<p><pre class="typescript-code"><span class="keyword">function</span> <span class="identifier">lol</span><span class="punctuation">(</span><span class="parameterName">arg</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">|</span> <span class="keyword">string</span><span class="punctuation">[</span><span class="punctuation">]</span> <span class="punctuation">|</span> <span class="punctuation">(</span><span class="error"><span class="error-highlight"></span><span class="punctuation">)</span></span> <span class="error"><span class="error-highlight"></span><span class="punctuation">=></span></span> <span class="error"><span class="error-highlight"></span><span class="error"><span class="error-highlight"></span><span class="parameterName">string</span></span></span><span class="error"><span class="error-highlight"></span> <span class="error"><span class="error-highlight"></span><span class="punctuation">|</span></span> <span class="punctuation">{</span> <span class="identifier">s</span><span class="punctuation">:</span> <span class="error"><span class="error-highlight"></span><span class="error"><span class="error-highlight"></span><span class="identifier">string</span></span></span> <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">{</span>
    <span class="comment">// this is super common in JavaScript</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="keyword">typeof</span> <span class="identifier">arg</span> <span class="operator">===</span> <span class="stringLiteral">'string'</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="identifier">commonCase</span><span class="punctuation">(</span><span class="identifier">arg</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">else</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="identifier">Array</span><span class="punctuation">.</span><span class="identifier">isArray</span><span class="punctuation">(</span><span class="identifier">arg</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="identifier">arg</span><span class="punctuation">.</span><span class="identifier">map</span><span class="punctuation">(</span><span class="identifier">commonCase</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="identifier">join</span><span class="punctuation">(</span><span class="stringLiteral">","</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">else</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="keyword">typeof</span> <span class="identifier">arg</span> <span class="operator">===</span> <span class="stringLiteral">'function'</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="identifier">commonCase</span><span class="punctuation">(</span><span class="identifier">arg</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">else</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="identifier">commonCase</span><span class="punctuation">(</span><span class="identifier">arg</span><span class="punctuation">.</span><span class="identifier">s</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>

    <span class="keyword">function</span> <span class="identifier">commonCase</span><span class="punctuation">(</span><span class="parameterName">s</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="error"><span class="error-highlight"></span><span class="keyword">string</span></span> <span class="punctuation">{</span>
        <span class="comment">// finally, just convert a string to another string</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Duplicate identifier 'string'.</div></div><div class="listed-error"><div class="error-line">Duplicate identifier 'string'.</div></div><div class="listed-error"><div class="error-line">Parameter 'string' implicitly has an 'any' type.</div></div><div class="listed-error"><div class="error-line">Parameter '(Missing)' implicitly has an 'any' type.</div></div><div class="listed-error"><div class="error-line">Binding element 'string' implicitly has an 'any' type.</div></div><div class="listed-error"><div class="error-line">A function whose declared type is neither 'void' nor 'any' must return a value.</div></div><div class="listed-error"><div class="error-line">Type expected.</div></div><div class="listed-error"><div class="error-line">',' expected.</div></div><div class="listed-error"><div class="error-line">',' expected.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=function%20lol(arg%3A%20string%20%7C%20string%5B%5D%20%7C%20()%20%3D%3E%20string%20%7C%20%7B%20s%3A%20string%20%7D)%3A%20string%20%7B%0A%20%20%20%20%2F%2F%20this%20is%20super%20common%20in%20JavaScript%0A%20%20%20%20if%20(typeof%20arg%20%3D%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20%20%20return%20commonCase(arg)%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(Array.isArray(arg))%20%7B%0A%20%20%20%20%20%20%20%20return%20arg.map(commonCase).join(%22%2C%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(typeof%20arg%20%3D%3D%3D%20'function')%20%7B%0A%20%20%20%20%20%20%20%20return%20commonCase(arg())%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20commonCase(arg.s)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20commonCase(s%3A%20string)%3A%20string%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20finally%2C%20just%20convert%20a%20string%20to%20another%20string%0A%20%20%20%20%7D%0A%7D">Try</a></pre></p>
<p><code>string</code>, <code>Array</code> and <code>Function</code> have built-in type predicates,
conveniently leaving the object type for the <code>else</code> branch. It is
possible, however, to generate unions that are difficult to
differentiate at runtime. For new code, it's best to build only
discriminated unions.</p>
<p>The following types have built-in predicates:</p>
<p>Type      | Predicate
----------|-----------
string    | <code>typeof s === "string"</code>
number    | <code>typeof n === "number"</code>
bigint    | <code>typeof m === "bigint"</code>
boolean   | <code>typeof b === "boolean"</code>
symbol    | <code>typeof g === "symbol"</code>
undefined | <code>typeof undefined === "undefined"</code>
function  | <code>typeof f === "function"</code>
array     | <code>Array.isArray(a)</code>
object    | <code>typeof o === "object"</code></p>
<p>Note that functions and arrays are objects at runtime, but have their
own predicates.</p>
<h3 id="intersections"><a href="#intersections">Intersections</h3></a>
<p>In addition to unions, TypeScript also has intersections:</p>
<p><pre class="typescript-code"><span class="keyword">type</span> <span class="typeAliasName"><span class="identifier">Combined</span></span> <span class="punctuation">=</span> <span class="punctuation">{</span> <span class="identifier">a</span><span class="punctuation">:</span> <span class="keyword">number</span> <span class="punctuation">}</span> <span class="punctuation">&</span> <span class="punctuation">{</span> <span class="identifier">b</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">}</span>
<span class="keyword">type</span> <span class="typeAliasName"><span class="identifier">Conflicting</span></span> <span class="punctuation">=</span> <span class="punctuation">{</span> <span class="identifier">a</span><span class="punctuation">:</span> <span class="keyword">number</span> <span class="punctuation">}</span> <span class="punctuation">&</span> <span class="punctuation">{</span> <span class="identifier">a</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">}</span></pre></p>
<p><code>Combined</code> has two properties, <code>a</code> and <code>b</code>, just as if they had been
written as one object literal type. Intersection and union are
recursive in case of conflicts, so <code>Conflicting.a: number &amp; string</code>.</p>
<h2 id="unit-types"><a href="#unit-types">Unit types</h2></a>
<p>Unit types are subtypes of primitive types that contain exactly one
primitive value. For example, the string <code>"foo"</code> has the type
<code>"foo"</code>. Since JavaScript has no built-in enums, it is common to use a set of
well-known strings instead. Unions of string literal types allow
TypeScript to type this pattern:</p>
<p><pre class="typescript-code"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="identifier">pad</span><span class="punctuation">(</span><span class="parameterName">s</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">,</span> <span class="parameterName">n</span><span class="punctuation">:</span> <span class="keyword">number</span><span class="punctuation">,</span> <span class="parameterName">direction</span><span class="punctuation">:</span> <span class="stringLiteral">"left"</span> <span class="punctuation">|</span> <span class="stringLiteral">"right"</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">;</span>
<span class="identifier">pad</span><span class="punctuation">(</span><span class="stringLiteral">"hi"</span><span class="punctuation">,</span> <span class="numericLiteral">10</span><span class="punctuation">,</span> <span class="stringLiteral">"left"</span><span class="punctuation">)</span><span class="punctuation">;</span></pre>
When needed, the compiler <em>widens</em> &mdash; converts to a
supertype &mdash; the unit type to the primitive type, such as <code>"foo"</code>
to <code>string</code>. This happens when using mutability, which can hamper some
uses of mutable variables:</p>
<p><pre class="typescript-code"><span class="keyword">let</span> <span class="identifier">s</span> <span class="operator">=</span> <span class="stringLiteral">"right"</span><span class="punctuation">;</span>
<span class="error"><span class="error-highlight"></span><span class="identifier">pad</span></span><span class="punctuation">(</span><span class="stringLiteral">"hi"</span><span class="punctuation">,</span> <span class="numericLiteral">10</span><span class="punctuation">,</span> <span class="identifier">s</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// error: 'string' is not assignable to '"left" | "right"'</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot find name 'pad'.</div></div></pre></p>
<p>Here's how the error happens:</p>
<ul>
<li><code>"right": "right"</code></li>
<li><code>s: string</code> because <code>"right"</code> widens to <code>string</code> on assignment to a mutable variable.</li>
<li><code>string</code> is not assignable to <code>"left" | "right"</code></li>
</ul>
<p>You can work around this with a type annotation for <code>s</code>, but that
in turn prevents assignments to <code>s</code> of variables that are not of type
<code>"left" | "right"</code>.</p>
<p><pre class="typescript-code"><span class="keyword">let</span> <span class="identifier">s</span><span class="punctuation">:</span> <span class="stringLiteral">"left"</span> <span class="punctuation">|</span> <span class="stringLiteral">"right"</span> <span class="operator">=</span> <span class="stringLiteral">"right"</span><span class="punctuation">;</span>
<span class="error"><span class="error-highlight"></span><span class="identifier">pad</span></span><span class="punctuation">(</span><span class="stringLiteral">"hi"</span><span class="punctuation">,</span> <span class="numericLiteral">10</span><span class="punctuation">,</span> <span class="identifier">s</span><span class="punctuation">)</span><span class="punctuation">;</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot find name 'pad'.</div></div></pre></p>
<h1 id="concepts-similar-to-haskell"><a href="#concepts-similar-to-haskell">Concepts similar to Haskell</h1></a>
<h2 id="contextual-typing"><a href="#contextual-typing">Contextual typing</h2></a>
<p>TypeScript has some obvious places where it can infer types, like
variable declarations:</p>
<p><pre class="typescript-code"><span class="keyword">let</span> <span class="identifier">s</span> <span class="operator">=</span> <span class="stringLiteral">"I'm a string!"</span></pre></p>
<p>But it also infers types in a few other places that you may not expect
if you've worked with other C-syntax languages:</p>
<p><pre class="typescript-code"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="identifier">map</span><span class="punctuation"><</span><span class="typeParameterName"><span class="typeParameterName">T</span></span><span class="punctuation">,</span> <span class="typeParameterName"><span class="typeParameterName">U</span></span><span class="punctuation">></span><span class="punctuation">(</span><span class="parameterName">f</span><span class="punctuation">:</span> <span class="punctuation">(</span><span class="parameterName">t</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">)</span> <span class="punctuation">=></span> <span class="typeParameterName"><span class="identifier">U</span></span><span class="punctuation">,</span> <span class="parameterName">ts</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">U</span></span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
<span class="keyword">let</span> <span class="identifier">sns</span> <span class="operator">=</span> <span class="identifier">map</span><span class="punctuation">(</span><span class="parameterName">n</span> <span class="punctuation">=></span> <span class="identifier">n</span><span class="punctuation">.</span><span class="identifier">toString</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="numericLiteral">1</span><span class="punctuation">,</span><span class="numericLiteral">2</span><span class="punctuation">,</span><span class="numericLiteral">3</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span></pre></p>
<p>Here, <code>n: number</code> in this example also, despite the fact that <code>T</code> and <code>U</code>
have not been inferred before the call. In fact, after <code>[1,2,3]</code> has
been used to infer <code>T=number</code>, the return type of <code>n =&gt; n.toString()</code>
is used to infer <code>U=string</code>, causing <code>sns</code> to have the type
<code>string[]</code>.</p>
<p>Note that inference will work in any order, but intellisense will only
work left-to-right, so TypeScript prefers to declare <code>map</code> with the
array first:</p>
<p><pre class="typescript-code"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="identifier">map</span><span class="punctuation"><</span><span class="typeParameterName"><span class="typeParameterName">T</span></span><span class="punctuation">,</span> <span class="typeParameterName"><span class="typeParameterName">U</span></span><span class="punctuation">></span><span class="punctuation">(</span><span class="parameterName">ts</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="parameterName">f</span><span class="punctuation">:</span> <span class="punctuation">(</span><span class="parameterName">t</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">)</span> <span class="punctuation">=></span> <span class="typeParameterName"><span class="identifier">U</span></span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">U</span></span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span></pre></p>
<p>Contextual typing also works recursively through object literals, and
on unit types that would otherwise be inferred as <code>string</code> or
<code>number</code>. And it can infer return types from context:</p>
<p><pre class="typescript-code"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="identifier">run</span><span class="punctuation"><</span><span class="typeParameterName"><span class="typeParameterName">T</span></span><span class="punctuation">></span><span class="punctuation">(</span><span class="parameterName">thunk</span><span class="punctuation">:</span> <span class="punctuation">(</span><span class="parameterName">t</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">)</span> <span class="punctuation">=></span> <span class="keyword">void</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span>
<span class="keyword">let</span> <span class="identifier">i</span><span class="punctuation">:</span> <span class="punctuation">{</span> <span class="identifier">inference</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">}</span> <span class="operator">=</span> <span class="identifier">run</span><span class="punctuation">(</span><span class="parameterName">o</span> <span class="punctuation">=></span> <span class="punctuation">{</span> <span class="identifier">o</span><span class="punctuation">.</span><span class="identifier">inference</span> <span class="operator">=</span> <span class="stringLiteral">'INSERT STATE HERE'</span> <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span></pre></p>
<p>The type of <code>o</code> is determined to be <code>{ inference: string }</code> because</p>
<ol>
<li>Declaration initialisers are contextually typed by the
declaration's type: <code>{ inference: string }</code>.</li>
<li>The return type of a call uses the contextual type for inferences,
so the compiler infers that <code>T={ inference: string }</code>.</li>
<li>Arrow functions use the contextual type to type their parameters,
so the compiler gives <code>o: { inference: string }</code>.</li>
</ol>
<p>And it does so while you are typing, so that after typing <code>o.</code>, you
get completions for the property <code>inference</code>, along with any other
properties you'd have in a real program.
Altogether, this feature can make TypeScript's inference look a bit
like a unifying type inference engine, but it is not.</p>
<h2 id="type-aliases"><a href="#type-aliases">Type aliases</h2></a>
<p>Type aliases are mere aliases, just like <code>type</code> in Haskell. The
compiler will attempt to use the alias name wherever it was used in
the source code, but does not always succeed.</p>
<p><pre class="typescript-code"><span class="keyword">type</span> <span class="typeAliasName"><span class="identifier">Size</span></span> <span class="punctuation">=</span> <span class="punctuation">[</span><span class="keyword">number</span><span class="punctuation">,</span> <span class="keyword">number</span><span class="punctuation">]</span><span class="punctuation">;</span>
<span class="keyword">let</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="typeAliasName"><span class="identifier">Size</span></span> <span class="operator">=</span> <span class="punctuation">[</span><span class="numericLiteral">101.1</span><span class="punctuation">,</span> <span class="numericLiteral">999.9</span><span class="punctuation">]</span><span class="punctuation">;</span></pre></p>
<p>The closest equivalent to <code>newtype</code> is a <em>tagged intersection</em>:</p>
<p><pre class="typescript-code"><span class="keyword">type</span> <span class="typeAliasName"><span class="identifier">FString</span></span> <span class="punctuation">=</span> <span class="keyword">string</span> <span class="punctuation">&</span> <span class="punctuation">{</span> <span class="identifier">__compileTimeOnly</span><span class="punctuation">:</span> <span class="keyword">any</span> <span class="punctuation">}</span></pre></p>
<p>An <code>FString</code> is just like a normal string, except that the compiler
thinks it has a property named <code>__compileTimeOnly</code> that doesn't
actually exist. This means that <code>FString</code> can still be assigned to
<code>string</code>, but not the other way round.</p>
<h2 id="discriminated-unions"><a href="#discriminated-unions">Discriminated Unions</h2></a>
<p>The closest equivalent to <code>data</code> is a union of types with discriminant
properties, normally called discriminated unions in TypeScript:</p>
<p><pre class="typescript-code"><span class="keyword">type</span> <span class="typeAliasName"><span class="identifier">Shape</span></span> <span class="punctuation">=</span>
  <span class="punctuation">|</span> <span class="punctuation">{</span> <span class="identifier">kind</span><span class="punctuation">:</span> <span class="stringLiteral">"circle"</span><span class="punctuation">,</span> <span class="identifier">radius</span><span class="punctuation">:</span> <span class="keyword">number</span> <span class="punctuation">}</span>
  <span class="punctuation">|</span> <span class="punctuation">{</span> <span class="identifier">kind</span><span class="punctuation">:</span> <span class="stringLiteral">"square"</span><span class="punctuation">,</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="keyword">number</span> <span class="punctuation">}</span>
  <span class="punctuation">|</span> <span class="punctuation">{</span> <span class="identifier">kind</span><span class="punctuation">:</span> <span class="stringLiteral">"triangle"</span><span class="punctuation">,</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="keyword">number</span><span class="punctuation">,</span> <span class="identifier">y</span><span class="punctuation">:</span> <span class="keyword">number</span> <span class="punctuation">}</span><a class="playground-link" href="https://www.typescriptlang.org/play/#src=type%20Shape%20%3D%0A%20%20%7C%20%7B%20kind%3A%20%22circle%22%2C%20radius%3A%20number%20%7D%0A%20%20%7C%20%7B%20kind%3A%20%22square%22%2C%20x%3A%20number%20%7D%0A%20%20%7C%20%7B%20kind%3A%20%22triangle%22%2C%20x%3A%20number%2C%20y%3A%20number%20%7D">Try</a></pre></p>
<p>Unlike Haskell, the tag, or discriminant, is just a property in each
object type. Each variant has an identical property with a different
unit type. This is still a normal union type; the leading <code>|</code> is
an optional part of the union type syntax. You can discriminate the
members of the union using normal JavaScript code:</p>
<p><pre class="typescript-code"><span class="keyword">function</span> <span class="identifier">area</span><span class="punctuation">(</span><span class="parameterName">s</span><span class="punctuation">:</span> <span class="error"><span class="error-highlight"></span><span class="identifier">Shape</span></span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">kind</span> <span class="operator">===</span> <span class="stringLiteral">"circle"</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="identifier">Math</span><span class="punctuation">.</span><span class="identifier">PI</span> <span class="operator">*</span> <span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">radius</span> <span class="operator">*</span> <span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">radius</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">else</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">kind</span> <span class="operator">===</span> <span class="stringLiteral">"square"</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">x</span> <span class="operator">*</span> <span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">x</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">else</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">x</span> <span class="operator">*</span> <span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">y</span> <span class="operator">/</span> <span class="numericLiteral">2</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot find name 'Shape'.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=function%20area(s%3A%20Shape)%20%7B%0A%20%20%20%20if%20(s.kind%20%3D%3D%3D%20%22circle%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.PI%20*%20s.radius%20*%20s.radius%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(s.kind%20%3D%3D%3D%20%22square%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20s.x%20*%20s.x%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20s.x%20*%20s.y%20%2F%202%3B%0A%20%20%20%20%7D%0A%7D">Try</a></pre></p>
<p>Note that the return type is <code>area</code> is inferred to be <code>number</code> because
TypeScript knows the function is total. If some variant is not
covered, the return type of <code>area</code> will be <code>number | undefined</code> instead.</p>
<p>Also unlike Haskell, common properties show up in any union, so you
can usefully discriminate multiple members of the union:</p>
<p><pre class="typescript-code"><span class="keyword">function</span> <span class="identifier">height</span><span class="punctuation">(</span><span class="parameterName">s</span><span class="punctuation">:</span> <span class="error"><span class="error-highlight"></span><span class="identifier">Shape</span></span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">kind</span> <span class="operator">===</span> <span class="stringLiteral">"circle"</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="numericLiteral">2</span> <span class="operator">*</span> <span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">radius</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">else</span> <span class="punctuation">{</span>
        <span class="comment">// s.kind: "square" | "triangle"</span>
        <span class="keyword">return</span> <span class="identifier">s</span><span class="punctuation">.</span><span class="identifier">x</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot find name 'Shape'.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=function%20height(s%3A%20Shape)%20%7B%0A%20%20%20%20if%20(s.kind%20%3D%3D%3D%20%22circle%22)%20%7B%0A%20%20%20%20%20%20%20%20return%202%20*%20s.radius%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20s.kind%3A%20%22square%22%20%7C%20%22triangle%22%0A%20%20%20%20%20%20%20%20return%20s.x%3B%0A%20%20%20%20%7D%0A%7D">Try</a></pre></p>
<h2 id="type-parameters"><a href="#type-parameters">Type Parameters</h2></a>
<p>Like most C-descended languages, TypeScript requires declaration of
type parameters:</p>
<p><pre class="typescript-code"><span class="keyword">function</span> <span class="identifier">liftArray</span><span class="punctuation"><</span><span class="typeParameterName"><span class="typeParameterName">T</span></span><span class="punctuation">></span><span class="punctuation">(</span><span class="parameterName">t</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="interfaceName"><span class="identifier">Array</span></span><span class="punctuation"><</span><span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">></span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <span class="punctuation">[</span><span class="identifier">t</span><span class="punctuation">]</span><span class="punctuation">;</span>
<span class="punctuation">}</span><a class="playground-link" href="https://www.typescriptlang.org/play/#src=function%20liftArray%3CT%3E(t%3A%20T)%3A%20Array%3CT%3E%20%7B%0A%20%20%20%20return%20%5Bt%5D%3B%0A%7D">Try</a></pre></p>
<p>There is no case requirement, but type parameters are conventionally
single uppercase letters. Type parameters can also be constrained to a
type, which behaves a bit like type class constraints:</p>
<p><pre class="typescript-code"><span class="keyword">function</span> <span class="identifier">firstish</span><span class="punctuation"><</span><span class="typeParameterName"><span class="typeParameterName">T</span></span> <span class="keyword">extends</span> <span class="punctuation">{</span> <span class="identifier">length</span><span class="punctuation">:</span> <span class="keyword">number</span> <span class="punctuation">}</span><span class="punctuation">></span><span class="punctuation">(</span><span class="parameterName">t1</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">,</span> <span class="parameterName">t2</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <span class="identifier">t1</span><span class="punctuation">.</span><span class="identifier">length</span> <span class="operator">></span> <span class="identifier">t2</span><span class="punctuation">.</span><span class="identifier">length</span> <span class="operator">?</span> <span class="identifier">t1</span> <span class="operator">:</span> <span class="identifier">t2</span><span class="punctuation">;</span>
<span class="punctuation">}</span><a class="playground-link" href="https://www.typescriptlang.org/play/#src=function%20firstish%3CT%20extends%20%7B%20length%3A%20number%20%7D%3E(t1%3A%20T%2C%20t2%3A%20T)%3A%20T%20%7B%0A%20%20%20%20return%20t1.length%20%3E%20t2.length%20%3F%20t1%20%3A%20t2%3B%0A%7D">Try</a></pre></p>
<p>TypeScript can usually infer type arguments from a call based on the
type of the arguments, so type arguments are usually not needed.</p>
<p>Because TypeScript is structural, it doesn't need type parameters as
much as nominal systems. Specifically, they are not needed to make a
function polymorphic. Type parameters should only be used to
<em>propagate</em> type information, such as constraining parameters to be
the same type:</p>
<p><pre class="typescript-code"><span class="keyword">function</span> <span class="error"><span class="error-highlight"></span><span class="error"><span class="error-highlight"></span><span class="identifier">length</span></span></span><span class="punctuation"><</span><span class="typeParameterName"><span class="typeParameterName">T</span></span> <span class="keyword">extends</span> <span class="interfaceName"><span class="identifier">ArrayLike</span></span><span class="punctuation"><</span><span class="keyword">unknown</span><span class="punctuation">></span><span class="punctuation">></span><span class="punctuation">(</span><span class="parameterName">t</span><span class="punctuation">:</span> <span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="error"><span class="error-highlight"></span><span class="keyword">number</span></span> <span class="punctuation">{</span>
<span class="punctuation">}</span>

<span class="keyword">function</span> <span class="error"><span class="error-highlight"></span><span class="error"><span class="error-highlight"></span><span class="identifier">length</span></span></span><span class="punctuation">(</span><span class="parameterName">t</span><span class="punctuation">:</span> <span class="interfaceName"><span class="identifier">ArrayLike</span></span><span class="punctuation"><</span><span class="keyword">unknown</span><span class="punctuation">></span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="error"><span class="error-highlight"></span><span class="keyword">number</span></span> <span class="punctuation">{</span>
<span class="punctuation">}</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Duplicate identifier 'length'.</div></div><div class="listed-error"><div class="error-line">Duplicate function implementation.</div></div><div class="listed-error"><div class="error-line">A function whose declared type is neither 'void' nor 'any' must return a value.</div></div><div class="listed-error"><div class="error-line">Duplicate identifier 'length'.</div></div><div class="listed-error"><div class="error-line">Duplicate function implementation.</div></div><div class="listed-error"><div class="error-line">A function whose declared type is neither 'void' nor 'any' must return a value.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=function%20length%3CT%20extends%20ArrayLike%3Cunknown%3E%3E(t%3A%20T)%3A%20number%20%7B%0A%7D%0A%0Afunction%20length(t%3A%20ArrayLike%3Cunknown%3E)%3A%20number%20%7B%0A%7D">Try</a></pre></p>
<p>In the first <code>length</code>, T is not necessary; notice that it's only
referenced once, so it's not being used to constrain the type of the
return value or other parameters.</p>
<h3 id="higher-kinded-types"><a href="#higher-kinded-types">Higher-kinded types</h3></a>
<p>TypeScript does not have higher kinded types, so the following is not legal:</p>
<p><pre class="typescript-code"><span class="keyword">function</span> <span class="error"><span class="error-highlight"></span><span class="identifier">length</span></span><span class="punctuation"><</span><span class="typeParameterName"><span class="typeParameterName">T</span></span> <span class="keyword">extends</span> <span class="interfaceName"><span class="identifier">ArrayLike</span></span><span class="punctuation"><</span><span class="keyword">unknown</span><span class="punctuation">></span><span class="punctuation">,</span> <span class="typeParameterName"><span class="typeParameterName">U</span></span><span class="punctuation">></span><span class="punctuation">(</span><span class="parameterName">m</span><span class="punctuation">:</span> <span class="error"><span class="error-highlight"></span><span class="typeParameterName"><span class="identifier">T</span></span><span class="punctuation"><</span><span class="typeParameterName"><span class="identifier">U</span></span><span class="punctuation">></span></span><span class="punctuation">)</span> <span class="punctuation">{</span>
<span class="punctuation">}</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Duplicate identifier 'length'.</div></div><div class="listed-error"><div class="error-line">Type 'T' is not generic.</div></div></pre></p>
<h3 id="point-free-programming"><a href="#point-free-programming">Point-free programming</h3></a>
<p>Point-free programming &mdash; heavy use of currying and function
composition &mdash; is possible in JavaScript, but can be verbose.
In TypeScript, type inference often fails for point-free programs, so
you'll end up specifying type parameters instead of value parameters. The
result is so verbose that it's usually better to avoid point-free
programming.</p>
<h2 id="module-system"><a href="#module-system">Module system</h2></a>
<p>JavaScript's modern module syntax is a bit like Haskell's, except that
any file with <code>import</code> or <code>export</code> is implicitly a module:</p>
<p><pre class="typescript-code"><span class="keyword">import</span> <span class="punctuation">{</span> <span class="identifier">value</span><span class="punctuation">,</span> <span class="identifier">Type</span> <span class="punctuation">}</span> <span class="keyword">from</span> <span class="error"><span class="error-highlight"></span><span class="stringLiteral">'npm-package'</span></span>
<span class="keyword">import</span> <span class="punctuation">{</span> <span class="identifier">other</span><span class="punctuation">,</span> <span class="identifier">Types</span> <span class="punctuation">}</span> <span class="keyword">from</span> <span class="error"><span class="error-highlight"></span><span class="stringLiteral">'./local-package'</span></span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span class="identifier">prefix</span> <span class="keyword">from</span> <span class="error"><span class="error-highlight"></span><span class="stringLiteral">'../lib/third-package'</span></span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot find module 'npm-package'.</div></div><div class="listed-error"><div class="error-line">Cannot find module './local-package'.</div></div><div class="listed-error"><div class="error-line">Cannot find module '../lib/third-package'.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=import%20%7B%20value%2C%20Type%20%7D%20from%20'npm-package'%0Aimport%20%7B%20other%2C%20Types%20%7D%20from%20'.%2Flocal-package'%0Aimport%20*%20as%20prefix%20from%20'..%2Flib%2Fthird-package'">Try</a></pre></p>
<p>You can also import commonjs modules &mdash; modules written using node.js'
module system:</p>
<p><pre class="typescript-code"><span class="error"><span class="error-highlight"></span><span class="keyword">import</span> <span class="identifier">f</span> <span class="punctuation">=</span> <span class="keyword">require</span><span class="punctuation">(</span><span class="error"><span class="error-highlight"></span><span class="stringLiteral">'single-function-package'</span></span><span class="punctuation">)</span><span class="punctuation">;</span></span><hr class="error-divider"><div class="listed-error"><div class="error-line">Import assignment cannot be used when targeting ECMAScript modules. Consider using 'import * as ns from "mod"', 'import {a} from "mod"', 'import d from "mod"', or another module format instead.</div></div><div class="listed-error"><div class="error-line">Cannot find module 'single-function-package'.</div></div></pre></p>
<p>You can export with an export list:</p>
<p><pre class="typescript-code"><span class="keyword">export</span> <span class="punctuation">{</span> <span class="identifier">f</span> <span class="punctuation">}</span>

<span class="keyword">function</span> <span class="identifier">f</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span> <span class="keyword">return</span> <span class="identifier">g</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">}</span>
<span class="keyword">function</span> <span class="identifier">g</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span> <span class="punctuation">}</span> <span class="comment">// g is not exported</span><a class="playground-link" href="https://www.typescriptlang.org/play/#src=export%20%7B%20f%20%7D%0A%0Afunction%20f()%20%7B%20return%20g()%20%7D%0Afunction%20g()%20%7B%20%7D%20%2F%2F%20g%20is%20not%20exported">Try</a></pre></p>
<p>Or by marking each export individually:</p>
<p><pre class="typescript-code"><span class="keyword">export</span> <span class="keyword">function</span> <span class="identifier">f</span> <span class="error"><span class="error-highlight"></span><span class="punctuation">{</span></span> <span class="keyword">return</span> <span class="identifier">g</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">}</span>
<span class="keyword">function</span> <span class="identifier">g</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span> <span class="punctuation">}</span><hr class="error-divider"><div class="listed-error"><div class="error-line">'(' expected.</div></div></pre></p>
<p>The latter style is more common but both are allowed, even in the same
file.</p>
<h2 id="readonly-and-const"><a href="#readonly-and-const"><code>readonly</code> and <code>const</code></h2></a>
<p>In JavaScript, mutability is the default, although it allows variable
declarations with <code>const</code> to declare that the <em>reference</em> is
immutable. The referent is still mutable:</p>
<p><pre class="typescript-code"><span class="keyword">const</span> <span class="identifier">a</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="numericLiteral">1</span><span class="punctuation">,</span><span class="numericLiteral">2</span><span class="punctuation">,</span><span class="numericLiteral">3</span><span class="punctuation">]</span><span class="punctuation">;</span>
<span class="identifier">a</span><span class="punctuation">.</span><span class="identifier">push</span><span class="punctuation">(</span><span class="numericLiteral">102</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// ):</span>
<span class="identifier">a</span><span class="punctuation">[</span><span class="numericLiteral">0</span><span class="punctuation">]</span> <span class="operator">=</span> <span class="numericLiteral">101</span><span class="punctuation">;</span> <span class="comment">// D:</span><a class="playground-link" href="https://www.typescriptlang.org/play/#src=const%20a%20%3D%20%5B1%2C2%2C3%5D%3B%0Aa.push(102)%3B%20%2F%2F%20)%3A%0Aa%5B0%5D%20%3D%20101%3B%20%2F%2F%20D%3A">Try</a></pre></p>
<p>TypeScript additionally has a <code>readonly</code> modifier for properties.</p>
<p><pre class="typescript-code"><span class="keyword">interface</span> <span class="interfaceName"><span class="interfaceName">Rx</span></span> <span class="punctuation">{</span>
    <span class="keyword">readonly</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="keyword">number</span><span class="punctuation">;</span>
<span class="punctuation">}</span>
<span class="keyword">let</span> <span class="identifier">rx</span><span class="punctuation">:</span> <span class="interfaceName"><span class="identifier">Rx</span></span> <span class="operator">=</span> <span class="punctuation">{</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="numericLiteral">1</span> <span class="punctuation">}</span><span class="punctuation">;</span>
<span class="identifier">rx</span><span class="punctuation">.</span><span class="error"><span class="error-highlight"></span><span class="identifier">x</span></span> <span class="operator">=</span> <span class="numericLiteral">12</span><span class="punctuation">;</span> <span class="comment">// error</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot assign to 'x' because it is a read-only property.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=interface%20Rx%20%7B%0A%20%20%20%20readonly%20x%3A%20number%3B%0A%7D%0Alet%20rx%3A%20Rx%20%3D%20%7B%20x%3A%201%20%7D%3B%0Arx.x%20%3D%2012%3B%20%2F%2F%20error">Try</a></pre></p>
<p>It also ships with a mapped type <code>Readonly&lt;T&gt;</code> that makes
all properties <code>readonly</code>:</p>
<p><pre class="typescript-code"><span class="keyword">interface</span> <span class="interfaceName"><span class="interfaceName">X</span></span> <span class="punctuation">{</span>
    <span class="identifier">x</span><span class="punctuation">:</span> <span class="keyword">number</span><span class="punctuation">;</span>
<span class="punctuation">}</span>
<span class="keyword">let</span> <span class="identifier">rx</span><span class="punctuation">:</span> <span class="typeAliasName"><span class="identifier">Readonly</span></span><span class="punctuation"><</span><span class="interfaceName"><span class="identifier">X</span></span><span class="punctuation">></span> <span class="operator">=</span> <span class="punctuation">{</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="numericLiteral">1</span> <span class="punctuation">}</span><span class="punctuation">;</span>
<span class="identifier">rx</span><span class="punctuation">.</span><span class="error"><span class="error-highlight"></span><span class="identifier">x</span></span> <span class="operator">=</span> <span class="numericLiteral">12</span><span class="punctuation">;</span> <span class="comment">// error</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Cannot assign to 'x' because it is a read-only property.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=interface%20X%20%7B%0A%20%20%20%20x%3A%20number%3B%0A%7D%0Alet%20rx%3A%20Readonly%3CX%3E%20%3D%20%7B%20x%3A%201%20%7D%3B%0Arx.x%20%3D%2012%3B%20%2F%2F%20error">Try</a></pre></p>
<p>And it has a specific <code>ReadonlyArray&lt;T&gt;</code> type that removes
side-affecting methods and prevents writing to indices of the array,
as well as special syntax for this type:</p>
<p><pre class="typescript-code"><span class="keyword">let</span> <span class="identifier">a</span><span class="punctuation">:</span> <span class="interfaceName"><span class="identifier">ReadonlyArray</span></span><span class="punctuation"><</span><span class="keyword">number</span><span class="punctuation">></span> <span class="operator">=</span> <span class="punctuation">[</span><span class="numericLiteral">1</span><span class="punctuation">,</span> <span class="numericLiteral">2</span><span class="punctuation">,</span> <span class="numericLiteral">3</span><span class="punctuation">]</span><span class="punctuation">;</span>
<span class="keyword">let</span> <span class="identifier">b</span><span class="punctuation">:</span> <span class="keyword">readonly</span> <span class="keyword">number</span><span class="punctuation">[</span><span class="punctuation">]</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="numericLiteral">1</span><span class="punctuation">,</span> <span class="numericLiteral">2</span><span class="punctuation">,</span> <span class="numericLiteral">3</span><span class="punctuation">]</span><span class="punctuation">;</span>
<span class="identifier">a</span><span class="punctuation">.</span><span class="error"><span class="error-highlight"></span><span class="identifier">push</span></span><span class="punctuation">(</span><span class="numericLiteral">102</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// error</span>
<span class="error"><span class="error-highlight"></span><span class="identifier">b</span><span class="punctuation">[</span><span class="numericLiteral">0</span><span class="punctuation">]</span></span> <span class="operator">=</span> <span class="numericLiteral">101</span><span class="punctuation">;</span> <span class="comment">// error</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Property 'push' does not exist on type 'readonly number[]'.</div></div><div class="listed-error"><div class="error-line">Index signature in type 'readonly number[]' only permits reading.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=let%20a%3A%20ReadonlyArray%3Cnumber%3E%20%3D%20%5B1%2C%202%2C%203%5D%3B%0Alet%20b%3A%20readonly%20number%5B%5D%20%3D%20%5B1%2C%202%2C%203%5D%3B%0Aa.push(102)%3B%20%2F%2F%20error%0Ab%5B0%5D%20%3D%20101%3B%20%2F%2F%20error">Try</a></pre></p>
<p>You can also use a const-assertion, which operates on arrays and
object literals:</p>
<p><pre class="typescript-code"><span class="keyword">let</span> <span class="identifier">a</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="numericLiteral">1</span><span class="punctuation">,</span> <span class="numericLiteral">2</span><span class="punctuation">,</span> <span class="numericLiteral">3</span><span class="punctuation">]</span> <span class="keyword">as</span> <span class="identifier">const</span><span class="punctuation">;</span>
<span class="identifier">a</span><span class="punctuation">.</span><span class="error"><span class="error-highlight"></span><span class="identifier">push</span></span><span class="punctuation">(</span><span class="numericLiteral">102</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// error</span>
<span class="identifier">a</span><span class="punctuation">[</span><span class="error"><span class="error-highlight"></span><span class="numericLiteral">0</span></span><span class="punctuation">]</span> <span class="operator">=</span> <span class="numericLiteral">101</span><span class="punctuation">;</span> <span class="comment">// error</span><hr class="error-divider"><div class="listed-error"><div class="error-line">Property 'push' does not exist on type 'readonly [1, 2, 3]'.</div></div><div class="listed-error"><div class="error-line">Cannot assign to '0' because it is a read-only property.</div></div><a class="playground-link" href="https://www.typescriptlang.org/play/#src=let%20a%20%3D%20%5B1%2C%202%2C%203%5D%20as%20const%3B%0Aa.push(102)%3B%20%2F%2F%20error%0Aa%5B0%5D%20%3D%20101%3B%20%2F%2F%20error">Try</a></pre></p>
<p>However, none of these options are the default, so they are not
consistently used in TypeScript code.</p>
<h1 id="further-reading"><a href="#further-reading">Further reading</h1></a>
<ul>
<li>Mapped types</li>
<li>Index types]] and [[keyof types</li>
<li>Conditional types</li>
</ul>
    </article>

    <script src="https://unpkg.com/popper.js@1/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@4"></script>
    <script>
        tippy.setDefaults({preventOverflow: { enabled: false } });
    </script>
    </body>
    </html>